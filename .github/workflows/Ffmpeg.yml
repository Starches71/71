name: Apply Vignette Effect to Image

on:
  push:
    branches:
      - main

jobs:
  apply-vignette:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install FFmpeg
      run: sudo apt-get install ffmpeg

    - name: Apply Vignette Effect to Image
      run: |
        # Define input and output file paths
        INPUT_FILE="./images (31).jpeg"
        OUTPUT_FILE="./output_image_vignette.jpg"

        # Create a gradient overlay using drawbox
        ffmpeg -i "$INPUT_FILE" -vf "
          format=rgba,
          drawbox=y=ih*0.9:height=ih*0.1:color=black@1:t=fill,
          drawbox=y=ih*0.8:height=ih*0.1:color=black@0.8:t=fill,
          drawbox=y=ih*0.7:height=ih*0.1:color=black@0:t=fill
        " -y "$OUTPUT_FILE"

    - name: Upload result image
      uses: actions/upload-artifact@v4
      with:
        name: output-image-vignette
        path: ./output_image_vignette.jpg
